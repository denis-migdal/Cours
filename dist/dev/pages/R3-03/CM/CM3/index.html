<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8"/>
        <title>CM3 (Web1)</title>
        <link rel="stylesheet" href="./index.css">
        <script type="module" src="./index.js" defer></script>
    </head>
    <body>
        <style>
        </style>
        <header></header>
        <main>

<h1 id="cm3-ex√©cuter-du-code-dans-une-page-web-c√¥t√©-client">CM3: Ex√©cuter du code dans une page Web (c√¥t√© client)</h1>
<h2 id="du-code-sur-le-navigateur-">Du code sur le navigateur ?</h2>
<p>HTML permet de d√©finir la structure de la page Web, et CSS son affichage.</p>
<p>Cependant, pour g√©n√©rer du contenu dynamique et g√©rer les interactions avec l&#39;utilisateur, il est n√©cessaire de pouvoir ex√©cuter du code arbitraire sur le navigateur.</p>
<p>Pour cela, le navigateur est capable d&#39;interpr√©ter nativement deux langages :</p>
<ul>
<li>le <em>JavaScript</em> ;</li>
<li>le <em>WebAssembly</em> (une sorte d&#39;assembleur pour navigateur).</li>
</ul>
<p>Pour utiliser d&#39;autres langages, il faut alors les convertir soit en JavaScript, soit en WebAssembly (e.g. avec emscriptem).</p>
<p>‚ö† Contrairement √† JavaScript, le WebAssembly n&#39;a pas un acc√®s direct au DOM.</p>
<p>Afin de vous √©viter d&#39;avoir √† apprendre un nouveau langage, nous utiliserons <em>Brython</em> qui permet d&#39;ex√©cuter du code Python sur le navigateur. L&#39;un des avantages de Brython est qu&#39;il permet d&#39;utiliser les API natives du navigateur.</p>
<p>Pour les VCOD, nous verrons par la suite TypeScript en <em>Programmation Web</em> (S4) et <em>Programmation Web pour la Visualisation</em> (S5). Vous apprendrez donc un nouveau langage, mais serez d√©j√† familiaris√©s avec les API utilis√©es.</p>
<h3 id="ex√©cuter-du-code-dans-la-page-web">Ex√©cuter du code dans la page Web</h3>
<p>Dans l&#39;en-t√™te de la page Web, <html-code>&lt;script&gt;</html-code> permet d&#39;ex√©cuter du code sur la page :
<html-code class="block d4rk">
&lt;script src=&quot;<var>$JS_FILE</var>&quot; type=&quot;module&quot; <var>[defer|async]</var>&gt;&lt;/script&gt;
</html-code></p>
<p>üí° <html-code>type=&quot;module&quot;</html-code> indique le type du script (ici un module JavaScript).</p>
<p>üí° <html-code class="d4rk"><var>[defer|async]</var></html-code> permet d&#39;indiquer quand ex√©cuter le code inclus :</p>
<ul>
<li>par d√©faut : ex√©cuter le script avant d&#39;interpr√©ter le reste de la page (√† √©viter).</li>
<li><html-code>async</html-code> : continuer √† interpr√©ter la page Web pendant que le script se t√©l√©charge.</li>
<li><html-code>defer</html-code> : commencer √† t√©l√©charger le script, mais attendre que la page ai finie de se charger avant de l&#39;ex√©cuter.</li>
</ul>
<p>‚ö† Il recommand√© d&#39;attendre que la page ai finie de se charger avant de la manipuler. En effet, si le code HTML n&#39;a pas fini d&#39;√™tre interpr√©t√© lors de l&#39;ex√©cution du script, certains √©l√©ments ne seront pas encore charg√©s dans le DOM.</p>
<h3 id="la-console-de-la-page-web">La console de la page Web</h3>
<p>Les erreurs survenant durant l&#39;ex√©cution du code sont affich√©es dans la <em>console</em> de la page Web. [TODO: ouvrir la console de la page Web]</p>
<p>La console g√®re plusieurs niveau d&#39;affichages dont vous pouvez filtrer l&#39;affichage :</p>
<ul>
<li><js-code>console.debug(&quot;...&quot;)</js-code></li>
<li><js-code>console.info(&quot;...&quot;)</js-code></li>
<li><js-code>console.log(&quot;...&quot;)</js-code> : par d√©faut.</li>
<li><js-code>console.warn(&quot;...&quot;)</js-code></li>
<li><js-code>console.error(&quot;...&quot;)</js-code> : affiche aussi la pile d&#39;appel.</li>
</ul>
<p>üí° Vous pouvez formatter les textes affich√©s dans la console en le pr√©fixant par <code>%c</code>, e.g.
<js-code class="block">console.log(&quot;%cOK&quot;, &quot;color: red&quot;)</js-code> </p>
<p>üí° Vous pouvez manipuler la console via :</p>
<ul>
<li><js-code>.clear()</js-code> : effacer la console.</li>
<li><js-code class="d4rk">.group[Collapsed](<var>$NAME</var>)</js-code>/<js-code>.groupEnd()</js-code> : ouvre/ferme un groupe indent√© qui peut √™tre repli√© (<em>collapsed</em>) ou d√©pli√©.</li>
</ul>
<p>üí° <code>console</code> offre d&#39;autres fonctions d&#39;affichages :</p>
<ul>
<li><js-code class="d4rk">.assert(<var>$COND</var>, &quot;...&quot;)</js-code> : affiche une erreur si <js-code class="d4rk">$COND</js-code> est faux.</li>
<li><js-code>.dir()/.dirxml()</js-code> : afficher les propri√©t√©s d&#39;un objet.</li>
<li><js-code>.table(...)</js-code> : afficher le(s) object(s) sous la forme d&#39;un tableau.</li>
<li><js-code>.trace()</js-code> : afficher la pile d&#39;appel.</li>
</ul>
<p>üí° Cette console permet aussi d&#39;entrer du code JavaScript √† ex√©cuter gr√¢ce √† une interface <em>REPL</em> (<em>Read‚Äìeval‚Äìprint loop</em>).</p>
<h3 id="sp√©cificit√©s-de-brython">Sp√©cificit√©s de Brython</h3>
<p>L&#39;API du navigateur est accessible √† partir du module <py-code>browser.window<py-code> :
<py-code>from browser import window</py-code></p>
<p>En JavaScript, <js-code>window</js-code> repr√©sente la &quot;fen√™tre&quot; de la page Web actuelle. Il contient l&#39;ensemble des variables/classes/fonctions globales de la page Web. En particulier, <js-code>window.document</js-code> repr√©sente l&#39;arbre DOM de la page Web.</p>
<p>üí° En JavaScript, <js-code>window</js-code> est implicite, i.e. on peut √©crire <js-code>document</js-code> au lieu de <js-code>window.document</js-code>. En Brython, il faudra obligatoirement expliciter <js-code>window</js-code>.</p>
<p>‚ö† Afin que les objets Python s&#39;affichent correctement, il est important d&#39;utiliser la version Brython de <js-code>console</js-code> en l&#39;important via :
<py-code class="block">from browser import console</py-code></p>
<p>‚ö† Brython a aussi du mal √† distinguer les classes des fonctions JavaScripts. Pour instancier une nouvelle classe il faudra ainsi √©crire <py-code>window.URL.new()</py-code> au lieu de <py-code>URL()</py-code>. [TODO: corrig√© par SBrython]</p>
<h2 id="manipulation-du-dom">Manipulation du DOM</h2>
<h3 id="s√©lecteurs">S√©lecteurs</h3>
<p>Pour interagir avec le DOM, il convient de s√©lectionner les √©l√©ments HTML sur lesquels on souhaite interagir.</p>
<p>Pour cela on utilise <html-code>.querySelector[All]()</html-code> qui retourne le (ou les) <strong>descendants</strong> de <html-code class="d4rk"><var>$ELEM</var></html-code> correspondant au s√©lecteur <html-code class="d4rk"><var>$SELECTOR</var></html-code> :
<html-code class="block d4rk"><var>$ELEM</var>.querySelector[All](<var>$SELECTOR</var>)</html-code></p>
<p>üí° <html-code class="d4rk">.closest(<var>$S</var>)</html-code> retourne le premier <strong>anc√™tre</strong> correspondant au s√©lecteur <html-code class="d4rk"><var>$S</var></html-code>.</p>
<p>üí° <html-code class="d4rk">.matches(<var>$SELECTOR</var>)</html-code> retourne un bool√©en indiquant si l&#39;√©l√©ment correspond au s√©lecteur <html-code class="d4rk"><var>$S</var></html-code>.</p>
<p>üí° Dans un s√©lecteur, <css-code>:scope</css-code> permet de d√©signer l&#39;√©l√©ment √† partir du lequel on appelle ces fonctions.</p>
<p>üí° Vous pouvez utiliser ces fonctions sur <html-code>document</html-code>, mais aussi sur :</p>
<ul>
<li><html-code>document.documentElement</html-code> : la racine (<html-code>&lt;html&gt;</html-code>).</li>
<li><html-code>document.head</html-code></li>
<li><html-code>document.body</html-code></li>
</ul>
<p>üí° Il existe aussi les s√©lecteurs <a href="https://developer.mozilla.org/en-US/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript">XPath</a>, plus puissants, mais plus complexes.</p>
<h3 id="cr√©er-un-√©l√©ment-html">Cr√©er un √©l√©ment HTML</h3>
<p>Vous pouvez aussi cr√©er un √©l√©ment HTML via :</p>
<ul>
<li><js-code class="d4rk"><var>$E</var>.clone(true)</js-code> : duplique l&#39;√©l√©ment <js-code class="d4rk"><var>$E</var></js-code>.</li>
<li><js-code class="d4rk">document.createElement(<var>$N</var>[, {is: <var>$IS</var>}])</js-code> : cr√©√© un √©l√©ment de nom <js-code class="d4rk"><var>$N</var></js-code>.</li>
</ul>
<h3 id="manipuler-les-attributs-et-classes">Manipuler les attributs et classes</h3>
<p>En premier lieu il est possible de modifier les attributs et les classes d&#39;un √©l√©ment.</p>
<table>
    <thead>
        <tr>
            <th>
                Op√©ration
            </th>
            <th>
                Classes
            </th>
            <th>
                Attributs
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><i>Lister</i></td>
            <td><js-code mode="d4rk"></js-code></td>
            <td><js-code mode="d4rk">.getAttributeNames()</js-code></td>
        </tr>
        <tr>
            <td><i>Obtenir</i></td>
            <td><js-code mode="d4rk"></js-code></td>
            <td><js-code mode="d4rk">.getAttribute(<var>$N</var>)</js-code></td>
        </tr>
        <tr>
            <td><i>Ajouter</i></td>
            <td><js-code mode="d4rk">.classList.add(<var>$C</var>[,...])</js-code></td>
            <td><js-code mode="d4rk">.setAttribute(<var>$N</var>, <var>$V</var>)</js-code></td>
        </tr>
        <tr>
            <td><i>Supprimer</i></td>
            <td><js-code mode="d4rk">.classList.remove(<var>$C</var>[,...])</js-code></td>
            <td><js-code mode="d4rk">.removeAttribute(<var>$N</var>)</js-code></td>
        </tr>
        <tr>
            <td><i>Basculer</i></td>
            <td><js-code mode="d4rk">.classList.toggle(<var>$C</var>[, <var>$F</var>])</js-code></td>
            <td><js-code mode="d4rk">.toggleAttribute(<var>$N</var>[, <var>$F</var>])</js-code></td>
        </tr>
        <tr>
            <td><i>Contient ?</i></td>
            <td><js-code mode="d4rk">.classList.has(<var>$C</var>)</js-code></td>
            <td><js-code mode="d4rk">.hasAttribute(<var>$N</var>)</js-code></td>
        </tr>
    </tbody>
</table>

<p>üí° <js-code>.tagName</js-code> permet d&#39;obtenir le nom de la balise HTML.</p>
<h3 id="manipuler-les-attributs-data-">Manipuler les attributs data-*</h3>
<p>Les attributs <html-code>data-*</html-code> sont un peu particuliers. En effet, ils peuvent √™tre manipul√©s via <js-code>.(get|set|remove|toggle|has)Attribute()</js-code>, mais aussi via <js-code>.dataset</js-code> qui se manipule comme un dictionnaire associatif. Chaque cl√© <js-code class="d4rk"><var>$KEY</var></js-code> de <js-code>.dataset</js-code> correspondant √† un attribut <html-code class="d4rk">data-<var>$KEY</var></html-code> de l&#39;√©l√©ment HTML.</p>
<p>Ils sont utilis√©s afin que les d√©veloppeurs puissent d√©finir des attributs personnalis√©s, sans entrer en conflit avec les attributs d√©finis par HTML, e.g. <html-code class="d4rk">data-title</html-code>.</p>
<h3 id="manipuler-le-style">Manipuler le style</h3>
<p>La modification de l&#39;affichage d&#39;un √©l√©ment se fait usuellement via la modification de ses classes. Il est cependant tout √† fait possible de manipuler directement ses propri√©t√©s CSS. Dans ce cas de figure, on pr√©f√®re g√©n√©ralement se limiter √† la manipulation des propri√©t√©s personnalis√©es.</p>
<p>Les styles peuvent √™tre acc√©d√©s de deux mani√®res distinctes :</p>
<ul>
<li><js-code class="d4rk"><var>$E</var>.style</js-code> : les styles <strong>d√©clar√©s</strong> sur <js-code class="d4rk"><var>$E</var></js-code> ;</li>
<li><js-code class="d4rk">getComputedStyle(<var>$E</var>)</js-code> : les styles <strong>calcul√©s</strong> appliqu√©s sur <js-code class="d4rk"><var>$E</var></js-code> (en lecture seule).</li>
</ul>
<p>Il est alors possible d&#39;acc√©der ou de modifier les propri√©t√©s CSS via :</p>
<table>
    <thead>
        <tr>
            <th>
                Op√©ration
            </th>
            <th>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><i>Obtenir</i></td>
            <td><js-code mode="d4rk">.getPropertyValue(<var>$N</var>)</js-code></td>
        </tr>
        <tr>
            <td><i>D√©finir</i></td>
            <td><js-code mode="d4rk">.setProperty(<var>$N</var>, <var>$V</var>)</js-code></td>
        </tr>
        <tr>
            <td><i>Supprimer</i></td>
            <td><js-code mode="d4rk">.removeProperty(<var>$N</var>)</js-code></td>
        </tr>
    </tbody>
</table>

<p>‚ö† Pour obtenir des positions d&#39;√©l√©ments ais√©ment comparables, utilisez <js-code>.getBoundingClientRect()</js-code> qui retourne la position relativement √† la zone d&#39;affichage (i.e. la fen√™tre).</p>
<h3 id="manipuler-le-contenu">Manipuler le contenu</h3>
<p>Il existe beaucoup de mani√®re d&#39;obtenir un (ou des) √©l√©ment(s) √† partir d&#39;un autre. Nous verrons les plus g√©n√©riques :</p>
<ul>
<li><js-code>.parentElement</js-code> : le p√®re d&#39;un √©l√©ment.</li>
<li><js-code>.children</js-code> : la liste des √©l√©ments fils de l&#39;√©l√©ment.</li>
<li><js-code>.childNodes</js-code> : idem, mais inclus aussi les contenus autres, e.g. textes.</li>
</ul>
<p>Il existe beaucoup de mani√®re de modifier le contenu d&#39;un √©l√©ment. Nous verrons les plus g√©n√©riques :</p>
<ul>
<li><js-code>.textContent</js-code> permet d&#39;acc√©der et de d√©finir le contenu <strong>textuel</strong> d&#39;un √©l√©ment.</li>
<li><js-code class="d4rk">.append(<var>$N[,...]</var>)</js-code> : ajouter les noeud <js-code class="d4rk"><var>$N</var></js-code> (√©l√©ments ou textes).</li>
<li><js-code class="d4rk">.remove()</js-code> : retirer l&#39;√©l√©ment de son p√®re.</li>
<li><js-code>.replaceWith(<var>$N</var>)</js-code> : remplace l&#39;√©l√©ment par <js-code class="d4rk"><var>$N</var></js-code> dans son p√®re.</li>
<li><js-code class="d4rk">.replaceContent(<var>$N[,...]</var>)</js-code> : remplace le contenu de l&#39;√©l√©ment par <js-code class="d4rk"><var>$N</var></js-code>.</li>
</ul>
<p>‚ö† Un √©l√©ment ne peut √™tre qu&#39;√† un seul endroit √† la fois. L&#39;ins√©rer dans un √©l√©ment le retirera donc de son pr√©c√©dent p√®re.</p>
<h2 id="√©v√©nements">√âv√©nements</h2>
<p>-&gt;  [zone d&#39;affichage, comparer des positions sinon infernal]
-&gt; .scroll()</p>
<h3 id="principe">Principe</h3>
<p>-&gt; boucle d&#39;events &amp; promesses async (diff√©rent en Python) (corrig√© avec SBrython)</p>
<p>-&gt; trigger</p>
<h3 id="types-d√©vents">Types d&#39;√©vents</h3>
<p>TODO...</p>
<h3 id="delegated-events">Delegated events</h3>
<h3 id="debouncethrottlesetanimationframerequesthoist">Debounce/Throttle/setAnimationFrameRequest/hoist.</h3>
<ul>
<li>remove from DOM ?</li>
</ul>
<h3 id="signaux">Signaux</h3>
<h2 id="formulaires-et-manipulation-durl">Formulaires et manipulation d&#39;URL</h2>
<ul>
<li>validation (cf CM? avec regex &amp; zod)</li>
<li>History/location.</li>
</ul>
<h2 id="autres-√©l√©ments-dint√©ractions">Autres √©l√©ments d&#39;int√©ractions</h2>
<p>-&gt; attrs
-&gt; dialog/popover/details-summary
-&gt; CSS aussi... / caroussel / etc.</p>
<h2 id="autres-choses-possibles">Autres choses possibles</h2>
<ul>
<li>manipuler le shadowRoot (cf PW?)</li>
<li>calculs webworker/serviceworker/worklet cf PWV</li>
<li>stocker c√¥t√© client (...) cf PWV</li>
<li>dessiner canvas et animations (...) cf ?</li>
<li>iframe cf CM4?</li>
<li>fetch/download CM4?</li>
<li>g√©n√©rateur cf PWV (infini ou tr√®s gros)</li>
<li>components real API (cf PW)</li>
</ul>
<p>-&gt; profile/profileEnd() =&gt; profiler (perfs) -&gt; CM5 ?</p>
<p>‚ö† Pour des raisons de s√©curit√©, ce code arbitraire n&#39;a pas acc√®s aux ressources locales (i.e. sur votre poste de travail), ou aux autres page Web. Imaginez en effet qu&#39;√† la simple visite d&#39;une page Web, votre navigateur se mette √† ex√©cuter un code supprimant tous vos fichiers !</p>
<h1 id="old">old</h1>
<ul>
<li>cf README.md</li>
</ul>
<p>-&gt; order of deps =&gt; dev log.</p>
<p>@starting-style for animations</p>
<p>:(user-)valid
:(user-)invalid
:has()</p>
<p>document.
body/head.
rootElement.</p>
<p>activeElement (qui a le focus).
documentElement</p>
<h1 id="√©v√©nements-1">√âv√©nements</h1>
<h2 id="bubble-vs-capture">Bubble vs Capture</h2>
<p> Dans les navigateurs, les interactions sont g√©r√©es via des √©v√©nements, qui se composent de 2 phases :</p>
<ul>
<li><p>capture</p>
</li>
<li><p>bubble</p>
</li>
</ul>
<p><strong>Capture :</strong> La phase de capture est descendante, elle part du noeud racine et descend vers le noeud cible (target) final. Par exemple, lorsque vous cliquez sur un √©l√©ment, l&#39;√©v√©nement de clic va d&#39;abord partir du document, puis par le body. Le navigateur va propager l&#39;√©v√©nement en se demandant quel fils de l&#39;√©l√©ment courant est la cible de l&#39;√©v√©nement, afin de lui transmettre l&#39;√©v√©nement, puis recommence de mani√®re r√©cursive, l&#39;√©l√©ment fils cible devenant l&#39;√©l√©ment courant.</p>
<p><strong>Bubble :</strong> La phase de buble est montante, elle part du noeud cible (target) final et remonte vers le noeud racine. Si l&#39;√©v√©nement se propage dans le DOM (<code>bubble: true</code>), le navigateur va transmettre l&#39;√©v√©nement √† l&#39;√©l√©ment p√®re de l&#39;√©l√©ment courant, puis recommence de mani√®re r√©cursive, l&#39;√©l√©ment p√®re devant l&#39;√©l√©ment courant.</p>
<h2 id="√©couter-un-√©v√©nement">√âcouter un √©v√©nement</h2>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// [JS] Javascript</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">ev</span>) {
    <span class="hljs-comment">// ev.currentTarget : $ELEM</span>
    <span class="hljs-comment">// ev.target : source of the event.</span>
    <span class="hljs-comment">// ev.type   : $EVENT_TYPE</span>
    <span class="hljs-comment">// ev.detail : $EVENT_DATA (si CustomEvent, cf plus bas)</span>
    <span class="hljs-comment">// ev.preventDefault() : annuler l&#x27;action par d√©faut du navigateur</span>
    <span class="hljs-comment">// e.g. lorsqu&#x27;on clique sur un lien, emp√™cher d&#x27;aller vers la page.</span>
    <span class="hljs-comment">// ev.stopImmediatePropagation() : ne pas appeler les autres</span>
    <span class="hljs-comment">// handleurs pour cet √©v√©nement.</span>
}

$ELEM.<span class="hljs-title function_">addEventListener</span>($EVENT_TYPE, handler);
<span class="hljs-comment">// ou</span>
$ELEM.<span class="hljs-title function_">addEventListener</span>($EVENT_TYPE, <span class="hljs-function"><span class="hljs-params">ev</span> =&gt;</span> ... );
</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># [üêç] Python</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">ev</span>):
    <span class="hljs-comment"># ev.currentTarget : $ELEM</span>
    <span class="hljs-comment"># ev.target : source of the event.</span>
    <span class="hljs-comment"># ev.type   : $EVENT_TYPE</span>
    <span class="hljs-comment"># ev.detail : $EVENT_DATA (si CustomEvent, cf plus bas)</span>
    <span class="hljs-comment"># ev.preventDefault() : annuler l&#x27;action par d√©faut du navigateur</span>
    <span class="hljs-comment"># e.g. lorsqu&#x27;on clique sur un lien, emp√™cher d&#x27;aller vers la page.</span>
    <span class="hljs-comment"># ev.stopImmediatePropagation() : ne pas appeler les autres</span>
    <span class="hljs-comment"># handleurs pour cet √©v√©nement.</span>

$ELEM.addEventListener($EVENT_TYPE, handler)
</code></pre><p>üìñ <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">Plus d&#39;informations dans la documentation.</a></p>
<h2 id="√©couteur-d√©l√©gu√©">√âcouteur d√©l√©gu√©</h2>
<p>Il arrive qu&#39;on souhaite √©couter des √©v√©nements sur les descendants d&#39;un √©l√©ment, qui peuvent √™tre ajout√©s, d√©plac√©s, supprim√©s, etc. Le probl√®me est que cela n√©cessiterait de cr√©er un √©couteur pour chaque √©l√©ments et de les supprimer/ajouter √† chaque modifications du DOM.</p>
<p>Heureusement, il est possible d&#39;utiliser un √©couteur d√©l√©gu√©, i.e. d&#39;√©couter l&#39;√©v√©nement sur le descendant (n√©cessite que l&#39;√©v√©nement soit <code>bubble</code>, i.e. se propage dans le DOM).</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// [JS] Javascript</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">ev</span>) {
    <span class="hljs-keyword">if</span>( ev.<span class="hljs-property">target</span>.<span class="hljs-title function_">matches</span>($CSS_SELECTOR) ) {
        <span class="hljs-comment">// ...</span>
    }
    <span class="hljs-comment">// or</span>
    <span class="hljs-keyword">let</span> target;
    <span class="hljs-keyword">if</span>( target = ev.<span class="hljs-property">target</span>.<span class="hljs-title function_">closest</span>($CSS_SELECTOR) ) {
        <span class="hljs-comment">// ...</span>
    }
}

$ELEM.<span class="hljs-title function_">addEventListener</span>($EVENT_TYPE, handler);
</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># [üêç] Python</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">ev</span>):
    <span class="hljs-keyword">if</span> ev.target.matches($CSS_SELECTOR):
        <span class="hljs-comment"># ...</span>
    <span class="hljs-comment"># or</span>
    <span class="hljs-keyword">if</span> target := ev.target.closest($CSS_SELECTOR):
        <span class="hljs-comment"># ...</span>

$ELEM.addEventListener($EVENT_TYPE, handler)
</code></pre><h2 id="cr√©er-un-√©v√©nement">Cr√©er un √©v√©nement</h2>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// [JS] Javascript</span>

$ELEM.<span class="hljs-title function_">dispatchEvent</span>( <span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>($EVENT_TYPE) );
<span class="hljs-comment">// ou</span>
$ELEM.<span class="hljs-title function_">dispatchEvent</span>( <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>($EVENT_TYPE, {<span class="hljs-attr">detail</span>: $EVENT_DATA}) );
</code></pre><pre><code class="hljs language-python"><span class="hljs-comment"># [üêç] Python</span>

$ELEM.dispatchEvent( Event.new($EVENT_TYPE) )
<span class="hljs-comment"># ou</span>
$ELEM.dispatchEvent( CustomEvent.new($EVENT_TYPE, {<span class="hljs-string">&quot;detail&quot;</span>: $EVENT_DATA}) )
</code></pre><p>üí° Vous pouvez aussi ajouter, au 2√®me argument, l&#39;option <code>bubble: true</code> pour faire en sorte que l&#39;√©v√©nement soit bubble, i.e. se propage dans le DOM (par default <code>bubble: false</code>).</p>
</main>
    </body>
</html>